## Идея

Краевые случаи могут существенно усложнить логику обработки данных, при том, что встречаться они могут весьма редко, но для этого редкого случая придется написать кода сопоставимо с основный сценарием.

## Примеры

1.

При смене состояний 1-3 у сущности_1 мы можем делать это в лоб
При смене на состояние_4 мы так же должны изменить состояние у сущности_2, а информацию о сущности_3 вообще удалить из БД.
Так как это должно происходить транзакционно, а более мудрый механизм с DI не закладывался для реализации самого метода, пришлось нарушить ОСР (open-closed principle) и в ветку отбработки потребовалось вносить изменение, так что бы успешная смена на состояние_4 у сущности_1 могло произойти только при выполнении успешного изменения для сущности 2 и удаления сущности_3.



2.

При десериализации потребовалось обрабатывать новый вариант объекта с новыми полями.
Прежде в десериализаторе при получении информации для объекта использовался тип String, для новой же вариации было решено использовать типы обертки под каждое поле. Для будущих поколений это может усложнить понимание кода, т.к. легче рассматривать его по одной схеме, но тем не менее, использование подобных оберток полезно для минимизации ошибок в новом коде.


3.

В новой версии продукта для хранения данных по сущности_1 были заведены доп, таблицы. Т.к. данные по сущности_1 уже могли быть занесены в структуру_старую, то при сохранении в новой версии метода данных по сущности_1 нам надо проверять существовала ли эта сущность в струкруте_старой.

Если Нет  
  то просто сохраняем ее в новую   
Иначе  
  Удаляем из старой и переносим в новую  
  
После изученных материалов, в идеале, надо отказываться от обратной совместимости.

4.

В момент выполнения миграции на БД может происходить обращение к данным. Перед обращением мы проверяем имеем дело с новой структурой или миграции еще не было. Но после этого, до или во время основного запроса может произойти миграция, из-за которой мы поймаем ошибку в основном метод и надо будет воспользоваться альтернативным.
Этот случай может произойти один единственный раз и его нам легче было бы обработать попросив выполнить
инициатора запрос еще раз, чем отлавливать это все на своей стороне и увеличивать вероятность внесения ошибки.

## Итог

Общая идея всех этих краевых случаев, что обходить/объяснять для пользователей, что нам трудно обрабатывать все эти краевые случаи,
так же трудно делать и руководству, а попросить реализовать это программистов проще.
С другой стороны, надо обязательно уточнять насколько часто возникает такой краевой случай.

Из конференций знаю примеры, когда заказчик просил доработку на несколько человеконедель программиста,
для обработки ситуации происходившей 1-2 раза в полгода и решаемой за 15 минут оператором системы в ручном режиме.



